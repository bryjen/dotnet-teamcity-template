@inject BackendStatus BackendStatus
@implements IDisposable

@if (!string.IsNullOrWhiteSpace(_message))
{
    <div class="alert alert-warning m-0 rounded-0" role="alert">
        @_message
    </div>
}

@code {
    private string? _message;

    protected override void OnInitialized()
    {
        _message = BackendStatus.LastError;
        BackendStatus.Changed += OnChanged;
    }

    private void OnChanged()
    {
        _message = BackendStatus.LastError;
        InvokeAsync(StateHasChanged);
    }

    public void Dispose()
    {
        BackendStatus.Changed -= OnChanged;
    }
}


