@* Dropdown menu content component *@
@if (ParentMenu?.Open == true)
{
    <div 
        data-slot="dropdown-menu-content"
        data-dropdown-menu-content="@ParentMenu.MenuId"
        data-state="@(ParentMenu.Open ? "open" : "closed")"
        class="@GetClass()"
        @attributes="AdditionalAttributes">
        @ChildContent
    </div>
}

@code {
    [CascadingParameter] public DropdownMenu? ParentMenu { get; set; }
    [Parameter] public RenderFragment? ChildContent { get; set; }
    [Parameter] public int SideOffset { get; set; } = 4;
    [Parameter] public string? Class { get; set; }
    [Parameter(CaptureUnmatchedValues = true)] public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private string GetClass()
    {
        var baseClasses = "bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-[--radix-dropdown-menu-content-available-height] min-w-[8rem] origin-[--radix-dropdown-menu-content-transform-origin] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md";
        return ClassBuilder.Merge(baseClasses, Class);
    }
}
